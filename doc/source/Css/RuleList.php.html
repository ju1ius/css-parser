<html>
    <head>
        <script
            type="text/javascript"
            src="../../js/jquery-1.4.2.min.js">
        </script>
        <script
            type="text/javascript"
            src="../../syntax_highlighter/scripts/shCore.js">
        </script>
        <script
            type="text/javascript"
            src="../../syntax_highlighter/scripts/shBrushJScript.js">
        </script>
        <script
            type="text/javascript"
            src="../../syntax_highlighter/scripts/shBrushPhp.js">
        </script>
        <script
            type="text/javascript"
            src="../../syntax_highlighter/scripts/shBrushXml.js">
        </script>
        <link
            href="../../syntax_highlighter/styles/shCore.css" rel="stylesheet"
            type="text/css"
        />
        <link
            href="../../syntax_highlighter/styles/shCoreEclipse.css"
            rel="stylesheet" type="text/css"
        />
        <link
            href="../../syntax_highlighter/styles/shThemeWordpress.css"
            rel="stylesheet" type="text/css"
        />
    </head>
    <body>
        <pre class="brush: php">&lt;?php
namespace ju1ius\Css;

/**
 * Manages a list of ju1ius\Css\Rule objects
 * @package Css
 **/
class RuleList extends CssList implements Serializable
{

  public function prepend(Rule $rule)
  {
    parent::prepend($rule);
  }
	
  public function append(Rule $rule)
  {
    parent::append($rule);
	}


  public function remove(Rule $rule)
  {
    parent::remove($rule);
  }

  public function getRules()
  {
		return $this-&gt;items;
  }
  public function setRules(Array $rules)
  {
    $this-&gt;items = $rules;
  }

  public function getRule($index)
  {
    return isset($this-&gt;items[$index]) ? $this-&gt;items[$index] : null;
  }

  /**
   * Returns all Css rules recursively
   *
   * @return array
   **/
  public function getAllRules()
  {
    $rules = array();
    foreach($this-&gt;getRules() as $rule)
    {
      $rules[] = $rule;
      if(method_exists($rule, 'getRuleList'))
      {
        foreach($rule-&gt;getRuleList()-&gt;getAllRules() as $deep_rule)
        {
          $rules[] = $deep_rule;
        }
      }
    }
    return $rules;
  }

  /**
   * Returns all style rules recursively
   *
   * @return array
   **/
  public function getAllStyleRules()
  {
    $rules = array();
    foreach($this-&gt;getRules() as $rule)
    {
      if($rule instanceof Rule\StyleRule)
      {
        $rules[] = $rule;
      }
      else if(method_exists($rule, 'getRuleList'))
      {
        foreach($rule-&gt;getRuleList()-&gt;getAllStyleRules() as $deep_rule)
        {
          $rules[] = $deep_rule;
        }
      }
    }
    return $rules;
  }


  /**
   * Returns all StyleDeclarations recursively
   *
   * @return array
   **/
  public function getAllStyleDeclarations()
  {
    $rules = array();
    foreach($this-&gt;getRules() as $rule)
    {
      if(method_exists($rule, 'getStyleDeclaration'))
      {
        $rules[] = $rule-&gt;getStyleDeclaration();
      }
      else if(method_exists($rule, 'getRuleList'))
      {
        foreach($rule-&gt;getRuleList()-&gt;getAllStyleDeclarations() as $deep_rule)
        {
          $rules[] = $deep_rule;
        }
      }
    }
    return $rules;
  }

  /**
   * Returns all Css values recursively
   *
   * @param string $searchString              Restrict search to given property name
   * @param bool   $searchInFunctionArguments Whether to return values used as arguments of Css functions
   *
   * @return array
   **/
  public function getAllValues($searchString=null, $searchInFunctionArguments=false)
  {
    $values = array();
    foreach($this-&gt;getRules() as $rule)
    {
      self::_findAllValues($rule, $values, $searchString, $searchInFunctionArguments);
    }
    return $values;
  }

  /**
   * Recursively finds all css values in a given object
   *
   * @param mixed  $element      The object to search in
   * @param array  &amp;$result      The array to store values in
   * @param string $searchString { @link ju1ius\Css\RuleList::getAllValues() }
   * @param string $searchInFunctionArguments { @link ju1ius\Css\RuleList::getAllValues() }
   *
   **/
  private static function _findAllValues($element, &amp;$result, $searchString=null, $searchInFunctionArguments=false)
  {
    if($element instanceof Rule)
    {
      if(method_exists($element, 'getRuleList'))
      {
        foreach($element-&gt;getRuleList()-&gt;getRules() as $rule)
        {
          self::_findAllValues($rule, $result, $searchString, $searchInFunctionArguments);
        }
      }
      else if(method_exists($element, 'getStyleDeclaration'))
      {
        $properties = $element-&gt;getStyleDeclaration()-&gt;getProperties($searchString);
        foreach($properties as $property)
        {
          self::_findAllValues($property-&gt;getValueList(), $result, null, $searchInFunctionArguments);
        }
      }
    }
    else if($element instanceof PropertyValueList)
    {
      foreach($element-&gt;getComponents() as $component)
      {
        self::_findAllValues($component, $result, null, $searchInFunctionArguments);
      }
    }
    else if($element instanceof Value)
    {
      if($searchInFunctionArguments &amp;&amp; $element instanceof Value\Func)
      {
        foreach($element-&gt;getArguments() as $arg)
        {
          self::_findAllValues($arg, $result, null, $searchInFunctionArguments);
        }
      }
      else
      {
        $result[] = $element;
      }
    }
    else
    {
      $result[] = $element;
    }
  }

	/**
	 * ------------ ju1ius\Css\Serializable interface implementation
	 **/

  public function getCssText($options=array())
	{
		$indent = '';
		$nl = '';
		if(isset($options['indent_level']))
		{
			$indent = str_repeat($options['indent_char'], $options['indent_level']);
			$nl = &quot;\n&quot;;
		}
		return implode($nl, array_map(function($rule) use($indent, $options)
		{
			return $indent . $rule-&gt;getCssText($options);
		}, $this-&gt;items));
  }
  public function __toString()
  {
    return $this-&gt;getCssText();
  }

}
</pre>
        <script type="text/javascript">
             SyntaxHighlighter.all()
             jQuery('.gutter div').each(function(key, data){
                jQuery(data).prepend('<a name="L'+jQuery(data).text()+'"/>');
             });
        </script>
    </body>
</html>